<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高血壓衛教互動網站</title>
    <!-- 載入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 使用 Inter 字體 -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; /* 淺灰色背景 */
        }
        .section-card {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        .quiz-option:hover {
            background-color: #f1f5f9; /* 淺藍色懸停效果 */
        }
        .correct-answer {
            background-color: #d1fae5; /* 綠色背景 */
            border-color: #10b981;
        }
        .incorrect-answer {
            background-color: #fee2e2; /* 紅色背景 */
            border-color: #ef4444;
        }
        /* 導航按鈕的基底樣式 */
        .tab-button {
            border: none;
            cursor: pointer;
            outline: none;
            transition: all 0.2s ease;
            color: white;
            padding: 0.75rem 1.5rem;
            font-weight: 700;
            border-radius: 0.5rem 0.5rem 0 0; /* 圓角只在上方 */
            white-space: nowrap; /* 防止換行 */
            margin-right: 0.25rem;
        }
        /* 非活動按鈕樣式 */
        .tab-button.inactive {
            background-color: #93c5fd; /* blue-300 */
            color: #1e3a8a; /* blue-900 */
        }
        /* 活動按鈕樣式 */
        .tab-button.active {
            background-color: #ffffff; /* 白色背景 */
            color: #1e3a8a; /* blue-900 */
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -2px rgba(0, 0, 0, 0.06);
            border-top: 3px solid #3b82f6; /* blue-500 邊框 */
            transform: translateY(1px); /* 輕微上移以銜接內容區 */
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto p-4 sm:p-8">
        <!-- 標題區塊 -->
        <header class="text-center py-6 bg-white rounded-xl section-card mb-8 shadow-lg">
            <h1 class="text-4xl font-extrabold text-blue-800 mb-2">高血壓衛教互動學習</h1>
            <p class="text-xl text-gray-600">從心智圖到臨床實踐：護理衛教互動平台</p>
        </header>

        <!-- 導航列 (Tab 切換) -->
        <nav class="flex justify-center -mb-px overflow-x-auto pb-1">
            <button id="nav-definition" onclick="switchTab('definition')" class="tab-button inactive">
                1. 定義與標準
            </button>
            <button id="nav-risk" onclick="switchTab('risk')" class="tab-button inactive">
                2. 風險因素與成因
            </button>
            <button id="nav-complications" onclick="switchTab('complications')" class="tab-button inactive">
                3. 併發症與危象
            </button>
            <button id="nav-management" onclick="switchTab('management')" class="tab-button inactive">
                4. 生活管理與護理
            </button>
            <button id="nav-quiz" onclick="switchTab('quiz')" class="tab-button inactive bg-red-300 text-red-900 hover:bg-red-200">
                互動測驗
            </button>
        </nav>

        <!-- 內容容器 -->
        <div id="tab-content-container" class="border border-t-0 border-gray-300 rounded-b-xl section-card p-4 sm:p-8 bg-white">
            
            <!-- 1. 定義與標準 區塊 -->
            <section id="content-definition" class="content-tab">
                <h2 class="text-3xl font-bold text-gray-800 border-l-4 border-blue-500 pl-3 mb-6">高血壓定義與標準</h2>
                
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner hover:translate-y-[-2px]">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-3 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                        血壓分級與判斷
                    </h3>
                    <p class="text-gray-700 mb-2">
                         成人理想血壓應小於 120/80 mmHg。根據 2017 AHA/ACC 指引，高血壓定義為收縮壓 $\ge 130$ mmHg 或舒張壓 $\ge 80$ mmHg。
                    </p>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>正常血壓：< 120 / < 80 mmHg</li>
                        <li>高血壓前期：120-129 / < 80 mmHg</li>
                        <li>高血壓第一期：130-139 / 80-89 mmHg</li>
                        <li>高血壓第二期：$\ge 140$ / $\ge 90$ mmHg</li>
                    </ul>
                </div>
            </section>

            <!-- 2. 風險因素與成因 區塊 -->
            <section id="content-risk" class="content-tab hidden">
                <h2 class="text-3xl font-bold text-gray-800 border-l-4 border-blue-500 pl-3 mb-6">高血壓風險因素與成因</h2>
                
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner hover:translate-y-[-2px]">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-3 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        影響血壓的主要因素
                    </h3>
                    <p class="text-gray-700 mb-2">
                         高血壓多為原發性，與生活習慣和遺傳高度相關。
                    </p>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>**可控因素（生活型態）：** 高鈉飲食、缺乏運動、肥胖 (BMI $\ge 24$ kg/m$^2$)、過量飲酒、抽菸、壓力。</li>
                        <li>**不可控因素：** 年齡（> 65歲）、家族史、種族。</li>
                        <li>**次發性高血壓成因：** 腎臟疾病、內分泌疾病（如甲狀腺、腎上腺皮質功能亢進）。</li>
                    </ul>
                </div>
            </section>
            
            <!-- 3. 併發症與危象 區塊 -->
            <section id="content-complications" class="content-tab hidden">
                <h2 class="text-3xl font-bold text-gray-800 border-l-4 border-blue-500 pl-3 mb-6">高血壓常見併發症與急症</h2>
                
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner hover:translate-y-[-2px]">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-3 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                        高血壓對全身器官的影響
                    </h3>
                    <p class="text-gray-700 mb-2">
                         長期高血壓會損害全身血管，影響器官功能。
                    </p>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>**腦部（中風風險）：** 腦中風（缺血性/出血性）、暫時性腦缺血 (TIA)。</li>
                        <li>**心臟（心衰竭）：** 冠狀動脈疾病 (CAD)、心肌梗塞、左心室肥厚、心衰竭。</li>
                        <li>**腎臟（腎衰竭）：** 慢性腎臟病 (CKD)、腎衰竭。</li>
                        <li>**眼睛：** 高血壓性視網膜病變。</li>
                    </ul>
                </div>
            </section>

            <!-- 4. 生活管理與護理 區塊 -->
            <section id="content-management" class="content-tab hidden">
                <h2 class="text-3xl font-bold text-gray-800 border-l-4 border-blue-500 pl-3 mb-6">高血壓治療與護理衛教核心</h2>
                
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner hover:translate-y-[-2px]">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-3 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        非藥物與藥物介入
                    </h3>
                    <p class="text-gray-700 mb-2">
                         治療包括非藥物與藥物介入，護理衛教是成功的關鍵。
                    </p>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>**飲食管理 (DASH)：** 遵循 DASH 飲食，多攝取蔬菜、水果、低脂乳製品；每日鈉攝取量 $\le 1500$ mg。</li>
                        <li>**運動與體重：** 維持理想體重；每週至少 150 分鐘中等強度有氧運動。</li>
                        <li>**藥物指導：** 遵醫囑按時服用藥物（如利尿劑、ACEI、ARB、CCB 等），不可自行停藥。</li>
                        <li>**自我監測：** 定期且正確測量血壓並記錄，了解血壓變化趨勢。</li>
                    </ul>
                </div>
            </section>
            
            <!-- 互動測驗區塊 -->
            <section id="quiz-section" class="content-tab hidden">
                <h2 class="text-3xl font-bold text-gray-800 border-l-4 border-red-500 pl-3 mb-6">互動測驗：高血壓知識檢核</h2>
                
                <div class="p-6 rounded-xl section-card" id="quiz-container">
                    <!-- 測驗內容將由 JavaScript 動態生成 -->
                    <div id="quiz-content">
                        <p class="text-center text-gray-500 py-10">載入測驗中...</p>
                    </div>

                    <div class="flex justify-center mt-6">
                        <button id="submit-button" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-8 rounded-lg transition duration-300 transform hover:scale-105 shadow-md disabled:bg-gray-400">
                            送出答案
                        </button>
                        <button id="restart-button" class="hidden bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-lg ml-4 transition duration-300 transform hover:scale-105 shadow-md">
                            重新測驗
                        </button>
                    </div>
                </div>

                <!-- 結果區塊 -->
                <div id="results" class="mt-8 p-6 bg-gray-100 rounded-xl section-card hidden">
                    <h3 class="text-2xl font-bold text-center mb-4 text-green-700" id="results-message"></h3>
                    <p class="text-center text-xl text-gray-700">您答對了 <span id="score"></span> 題，總共 <span id="total-questions"></span> 題。</p>
                    <div id="detailed-feedback" class="mt-4 border-t pt-4">
                        <h4 class="text-xl font-semibold text-gray-800 mb-2">錯誤訂正與解析：</h4>
                        <!-- 詳情將由 JavaScript 填充 -->
                    </div>
                </div>
            </section>

        </div> <!-- End of tab-content-container -->
        
        <footer class="text-center py-4 text-gray-500 text-sm mt-8">
            護理系學生衛教專題設計 - 版權所有 &copy; 2025
        </footer>

    </div>

    <script>
        // JavaScript 邏輯開始

        // 引入 MathJax 來渲染 LaTeX 數學公式（如果衛教內容有用到）
        const mathJaxScript = document.createElement('script');
        mathJaxScript.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
        mathJaxScript.id = 'MathJax-script';
        mathJaxScript.async = true;
        document.head.appendChild(mathJaxScript);

        // 測驗問題陣列
        const quizQuestions = [
            {
                question: "根據最新的高血壓衛教指引，下列哪一項數值屬於高血壓第一期？",
                options: [
                    "110 / 70 mmHg",
                    "125 / 75 mmHg (高血壓前期)",
                    "135 / 85 mmHg (高血壓第一期)",
                    "145 / 95 mmHg (高血壓第二期)"
                ],
                answerIndex: 2,
                explanation: "高血壓第一期定義為收縮壓 130-139 mmHg 或舒張壓 80-89 mmHg。"
            },
            {
                question: "在衛教高血壓飲食管理時，建議病人每日鈉攝取量應限制在多少毫克以下？",
                options: [
                    "5000 mg",
                    "3000 mg",
                    "1500 mg",
                    "2500 mg"
                ],
                answerIndex: 2,
                explanation: "對於高血壓或高風險族群，建議鈉攝取量應限制在 1500 mg/天，一般成人不應超過 2300 mg/天。"
            },
            {
                question: "長期高血壓最可能導致的心臟併發症是哪一項？",
                options: [
                    "消化性潰瘍",
                    "心衰竭",
                    "骨質疏鬆",
                    "甲狀腺功能亢進"
                ],
                answerIndex: 1,
                explanation: "心衰竭是高血壓最常見且嚴重的併發症之一，因為長期高血壓會增加心臟負荷，導致心肌肥厚和功能受損。"
            },
            {
                question: "病人若被診斷為高血壓，護理師衛教時應強調哪種運動模式？",
                options: [
                    "高強度間歇訓練 (HIIT)",
                    "舉重等無氧運動",
                    "靜態伸展運動",
                    "每週至少 150 分鐘中等強度有氧運動"
                ],
                answerIndex: 3,
                explanation: "中等強度的有氧運動，如快走、慢跑或游泳，是降低血壓最有效的非藥物治療方式之一。"
            }
        ];

        const quizContent = document.getElementById('quiz-content');
        const submitButton = document.getElementById('submit-button');
        const restartButton = document.getElementById('restart-button');
        const resultsDiv = document.getElementById('results');
        const scoreSpan = document.getElementById('score');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const resultsMessage = document.getElementById('results-message');
        const detailedFeedback = document.getElementById('detailed-feedback');
        
        let userAnswers = new Array(quizQuestions.length).fill(null);
        let quizSubmitted = false;
        // 用於儲存當前測驗題目的正確選項在新順序中的索引
        let currentQuizAnswers = []; 

        // 【新增】 Fisher-Yates 洗牌演算法
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // 分頁切換邏輯
        window.switchTab = function(tabName) {
            const tabs = ['definition', 'risk', 'complications', 'management', 'quiz'];

            tabs.forEach(tab => {
                const contentSection = document.getElementById(tab === 'quiz' ? 'quiz-section' : `content-${tab}`);
                const navButton = document.getElementById(`nav-${tab}`);
                
                if (contentSection) contentSection.classList.add('hidden');
                if (navButton) {
                    navButton.classList.add('inactive');
                    navButton.classList.remove('active');
                    if (tab === 'quiz') {
                        navButton.classList.remove('bg-red-500', 'text-white');
                        navButton.classList.add('bg-red-300', 'text-red-900', 'hover:bg-red-200');
                    }
                }
            });

            const selectedContent = document.getElementById(tabName === 'quiz' ? 'quiz-section' : `content-${tabName}`);
            const selectedNav = document.getElementById(`nav-${tabName}`);

            if (selectedContent) {
                selectedContent.classList.remove('hidden');
                if (window.MathJax) {
                    window.MathJax.typeset();
                }
            }

            if (selectedNav) {
                selectedNav.classList.add('active');
                selectedNav.classList.remove('inactive');
                if (tabName === 'quiz') {
                    selectedNav.classList.remove('bg-red-300', 'text-red-900', 'hover:bg-red-200');
                    selectedNav.classList.add('bg-white', 'text-red-800');
                }
            }
        }


        // 渲染測驗題目
        function renderQuiz() {
            quizContent.innerHTML = ''; // 清空內容
            userAnswers.fill(null); // 重設使用者答案
            currentQuizAnswers = []; // 重設當前測驗答案索引

            // 1. 複製並隨機打亂問題順序
            const shuffledQuestions = shuffleArray([...quizQuestions]);

            shuffledQuestions.forEach((q, qIndex) => {
                // 2. 準備選項數據，包括是否為正確答案
                let optionsData = q.options.map((text, originalIndex) => ({
                    text,
                    isCorrect: originalIndex === q.answerIndex
                }));

                // 3. 隨機打亂選項順序
                const shuffledOptions = shuffleArray(optionsData);
                
                // 4. 找出正確選項在新順序中的索引
                const newCorrectIndex = shuffledOptions.findIndex(opt => opt.isCorrect);
                currentQuizAnswers.push({
                    correctIndex: newCorrectIndex,
                    explanation: q.explanation,
                    originalQuestion: q.question // 儲存原始問題以便提交後顯示
                });

                const questionHtml = `
                    <div class="question-block mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50 transition duration-200" data-qindex="${qIndex}">
                        <p class="text-lg font-medium text-gray-800 mb-4">
                            ${qIndex + 1}. ${q.question}
                        </p>
                        <div class="options-container space-y-3">
                            ${shuffledOptions.map((option, oIndex) => `
                                <div class="quiz-option p-3 border border-gray-300 rounded-lg cursor-pointer flex items-center bg-white" 
                                    data-oindex="${oIndex}" data-qindex="${qIndex}">
                                    <div class="w-5 h-5 border rounded-full mr-3 flex items-center justify-center bg-white text-sm text-gray-700 font-bold transition duration-150" id="indicator-${qIndex}-${oIndex}">
                                        ${String.fromCharCode(65 + oIndex)}
                                    </div>
                                    <span class="text-gray-700">${option.text}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="feedback mt-3 text-sm font-semibold hidden" id="feedback-${qIndex}"></div>
                    </div>
                `;
                quizContent.innerHTML += questionHtml;
            });

            // 添加選項點擊事件監聽器
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', handleOptionClick);
            });

            submitButton.disabled = false;
            restartButton.classList.add('hidden');
            resultsDiv.classList.add('hidden');
            quizSubmitted = false;
        }

        // 處理選項點擊
        function handleOptionClick(event) {
            if (quizSubmitted) return; 

            const target = event.currentTarget;
            const qIndex = parseInt(target.getAttribute('data-qindex'));
            const oIndex = parseInt(target.getAttribute('data-oindex'));
            
            userAnswers[qIndex] = oIndex;

            // 清除同一題所有選項的選擇狀態
            document.querySelectorAll(`.question-block[data-qindex="${qIndex}"] .quiz-option`).forEach(opt => {
                opt.classList.remove('ring-2', 'ring-blue-500', 'bg-blue-50');
                opt.querySelector('.w-5').classList.remove('bg-blue-500', 'text-white');
                opt.querySelector('.w-5').classList.add('border-gray-300', 'text-gray-700');
            });

            // 設置當前選項的選擇狀態
            target.classList.add('ring-2', 'ring-blue-500', 'bg-blue-50');
            target.querySelector('.w-5').classList.add('bg-blue-500', 'text-white');
            target.querySelector('.w-5').classList.remove('border-gray-300', 'text-gray-700');
        }

        // 處理提交測驗
        function handleSubmit() {
            if (quizSubmitted) return;
            
            let score = 0;
            detailedFeedback.innerHTML = '<h4 class="text-xl font-semibold text-gray-800 mb-2">錯誤訂正與解析：</h4>';
            quizSubmitted = true;
            submitButton.disabled = true;

            currentQuizAnswers.forEach((answerData, qIndex) => {
                const selectedAnswerIndex = userAnswers[qIndex];
                const correctAnswerIndex = answerData.correctIndex;
                const questionBlock = document.querySelector(`.question-block[data-qindex="${qIndex}"]`);
                const feedbackDiv = document.getElementById(`feedback-${qIndex}`);
                
                let isCorrect = (selectedAnswerIndex === correctAnswerIndex);
                
                // 標記正確答案
                const correctOption = questionBlock.querySelector(`.quiz-option[data-oindex="${correctAnswerIndex}"]`);
                correctOption.classList.add('correct-answer');
                correctOption.classList.remove('quiz-option'); // 移除 hover 效果
                correctOption.querySelector('.w-5').classList.add('bg-green-600', 'border-green-600', 'text-white');
                correctOption.querySelector('.w-5').innerHTML = '&#10003;'; // 打勾符號

                if (isCorrect) {
                    score++;
                    feedbackDiv.classList.remove('text-red-600');
                    feedbackDiv.classList.add('text-green-600', 'block');
                    feedbackDiv.innerHTML = '回答正確！';
                } else {
                    // 標記錯誤答案
                    if (selectedAnswerIndex !== null) {
                        const incorrectOption = questionBlock.querySelector(`.quiz-option[data-oindex="${selectedAnswerIndex}"]`);
                        incorrectOption.classList.remove('ring-2', 'ring-blue-500', 'bg-blue-50');
                        incorrectOption.classList.add('incorrect-answer');
                        incorrectOption.querySelector('.w-5').classList.add('bg-red-600', 'border-red-600', 'text-white');
                        incorrectOption.querySelector('.w-5').innerHTML = '&#10007;'; // 錯誤符號
                    }

                    // 顯示詳細解析
                    feedbackDiv.classList.remove('text-green-600');
                    feedbackDiv.classList.add('text-red-600', 'block');
                    feedbackDiv.innerHTML = `回答錯誤。正確答案是 **${String.fromCharCode(65 + correctAnswerIndex)}**。`;
                    
                    const feedbackItem = `
                        <div class="mb-4 p-3 bg-red-50 rounded-lg">
                            <p class="font-bold text-red-700">${qIndex + 1}. ${answerData.originalQuestion}</p>
                            <p class="text-sm mt-1 text-red-600">您的答案：${selectedAnswerIndex === null ? '未作答' : String.fromCharCode(65 + selectedAnswerIndex)}，正確答案：${String.fromCharCode(65 + correctAnswerIndex)}。</p>
                            <p class="text-sm mt-1 text-gray-700">**解析：** ${answerData.explanation}</p>
                        </div>
                    `;
                    detailedFeedback.innerHTML += feedbackItem;
                }
                
                // 移除所有選項的點擊事件
                questionBlock.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.removeEventListener('click', handleOptionClick);
                    opt.classList.remove('cursor-pointer', 'quiz-option:hover');
                });
            });

            // 顯示總結結果
            scoreSpan.textContent = score;
            totalQuestionsSpan.textContent = currentQuizAnswers.length;
            resultsDiv.classList.remove('hidden');
            
            if (score === currentQuizAnswers.length) {
                resultsMessage.textContent = "恭喜您！全部答對，衛教知識非常紮實！";
                resultsMessage.classList.remove('text-red-700', 'text-orange-600');
                resultsMessage.classList.add('text-green-700');
            } else if (score >= currentQuizAnswers.length / 2) {
                resultsMessage.textContent = "表現不錯！請複習錯誤訂正的內容。";
                resultsMessage.classList.remove('text-red-700', 'text-green-700');
                resultsMessage.classList.add('text-orange-600');
            } else {
                resultsMessage.textContent = "請加強複習衛教內容！";
                resultsMessage.classList.remove('text-green-700', 'text-orange-600');
                resultsMessage.classList.add('text-red-700');
            }
            
            restartButton.classList.remove('hidden');
        }

        // 處理重新測驗
        function handleRestart() {
            renderQuiz();
            if (window.MathJax) {
                window.MathJax.typeset();
            }
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            submitButton.addEventListener('click', handleSubmit);
            restartButton.addEventListener('click', handleRestart);

            mathJaxScript.onload = () => {
                if (window.MathJax) {
                    window.MathJax.typeset();
                    switchTab('definition');
                }
            };

            if (window.MathJax && window.MathJax.typeset) {
                switchTab('definition');
            }
        });

    </script>
</body>
</html>